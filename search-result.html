<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="">
    <meta name="author" content="">

    <title>A3 Search</title>
    <link rel="icon" href="images/logo3.png" type="image/x-icon" />

    <!-- CSS FILES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400&family=Sono:wght@200;300;400;500;700&display=swap"
        rel="stylesheet">

    <link rel="stylesheet" href="css/bootstrap.min.css">

    <link rel="stylesheet" href="css/bootstrap-icons.css">

    <link rel="stylesheet" href="css/owl.carousel.min.css">

    <link rel="stylesheet" href="css/owl.theme.default.min.css">

    <link href="css/templatemo-pod-talk.css" rel="stylesheet">

</head>


<body>

    <nav class="navbar navbar-expand-lg">
        <div class="container">
            <a class="navbar-brand me-lg-5 me-0" href="index.html">
                <img src="images/logo3.png" class="logo-image img-fluid" alt="templatemo pod talk">
            </a>

            <form action="index.html" method="get" class="custom-form search-form flex-fill me-3" role="search" id="searchForm">
                <div class="input-group input-group-lg">
                    <input name="search" type="search" class="form-control" id="search"
                        placeholder="Cari Tipe Barang" aria-label="Search">

                    <button type="submit" class="form-control" id="submit">
                        <i class="bi-search"></i>
                    </button>
                </div>
            </form>

            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-lg-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="index.html">Home</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="about.html">About</a>
                    </li>

                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="navbarLightDropdownMenuLink" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">Pages</a>

                        <ul class="dropdown-menu dropdown-menu-light" aria-labelledby="navbarLightDropdownMenuLink">
                            <li><a class="dropdown-item" href="listing-page.html">Listing Page</a></li>

                            <li><a class="dropdown-item" href="detail-page.html">Detail Page</a></li>
                        </ul>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="contact.html">Contact</a>
                    </li>
                </ul>

                <div class="ms-4">
                    <a href="#section_3" class="btn custom-btn custom-border-btn smoothscroll">Link Start!</a>
                </div>
            </div>
        </div>
    </nav>

    <section class="hero-section">
        <h1>Search Result</h1>
        <div id="searchResults">

        </div>
    </section>
    
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/owl.carousel.min.js"></script>
    <script src="js/custom.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/chart.js"></script>
    <script>
        document.getElementById('searchForm').addEventListener('submit', function(event) {
                event.preventDefault();
                var searchTerm = document.querySelector('#search').value.trim();
                window.location.href = 'search-result.html?search=' + encodeURIComponent(searchTerm);
            });

        document.addEventListener('DOMContentLoaded', function () {
            // Parsing URL parameters to get search term
            const urlParams = new URLSearchParams(window.location.search);
            const searchTerm = urlParams.get('search');

            if (searchTerm) {
                // Fetch index.html
                fetch('index.html')
                    .then(response => response.text())
                    .then(data => {
                        // Create a temporary DOM element to parse the fetched HTML
                        const tempDiv = document.createElement('div');
                        tempDiv.innerHTML = data;

                        // Select the .dataVisual section
                        const dataVisualSection = tempDiv.querySelector('.dataVisual');

                        // Function to search for elements with matching section titles
                        function searchByTitle(searchTerm) {
                            const containers = dataVisualSection.querySelectorAll('.container');
                            const searchResults = [];

                            containers.forEach(container => {
                                const titleElement = container.querySelector('.section-title');
                                if (titleElement) {
                                    const title = titleElement.textContent.trim().toLowerCase();
                                    // Using regular expression to match case-insensitive and partial search
                                    const regex = new RegExp(searchTerm.toLowerCase(), 'i');
                                    if (regex.test(title)) {
                                        searchResults.push(container.innerHTML);
                                    }
                                }
                            });

                            return searchResults;
                        }

                        // Display search results
                        const searchResults = searchByTitle(searchTerm);
                        const searchResultsContainer = document.getElementById('searchResults');
                        if (searchResults.length > 0) {
                            searchResultsContainer.innerHTML = searchResults.join('');
                        } else {
                            searchResultsContainer.innerHTML = '<p>No matching results found.</p>';
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching index.html:', error);
                    });
            }
        });
    </script>
</body>

</html>